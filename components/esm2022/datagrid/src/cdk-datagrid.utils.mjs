import { itemPayloadDefault } from './cdk-datagrid-data.manager';
/**
 * experimental
 * @param itemDefault
 * @param itemPayloadDefault
 */
export const itemPayloadFactory = (itemDefault, itemPayloadDefault = {}) => (item, itemPayload = {}) => {
    return setItemPayload(
    // item // works!
    { ...itemDefault, ...item }, // does not work!
    Object.keys(itemPayloadDefault).length ? itemPayloadDefault : itemPayload);
};
/**
 * setItemPayload sets an itemPayload on item in hidden-type-mode.
 * This means there is no direct access to itemPayload on returned item with TypeScript.
 * The advantage of this approach is that you can put implementation details
 * at type level in a hidden-type-mode so that it allows carry payload with an item.
 *
 * To get the itemPayload you should use getItemPayloadValue or getItemPayload.
 */
// prettier-ignore
export const setItemPayload = (item, itemPayload = {}) => {
    const _item = item;
    _item._$hiddenItemPayload = Object.assign({ ...itemPayloadDefault }, { ..._item?._$hiddenItemPayload ?? {} }, { ...itemPayload });
    return _item;
};
/**
 * getItemPayloadValue returns a specific itemPayloadValue of an item by given key.
 */
// prettier-ignore
export const getItemPayloadValue = (item, key) => {
    const _item = item;
    if (!_item?._$hiddenItemPayload) {
        console.log(_item);
        throw ErrorItemPayload(item);
    }
    return _item._$hiddenItemPayload[key];
};
/**
 * getItemPayload returns itemPayload which is in hidden-type-mode
 */
// prettier-ignore
export const getItemPayload = (item) => {
    const _item = item;
    if (!_item?._$hiddenItemPayload) {
        console.log(_item);
        throw ErrorItemPayload(item);
    }
    return _item._$hiddenItemPayload;
};
export const getItemData = (item) => {
    const _item = item;
    if (!_item?._$hiddenItemPayload)
        throw ErrorItemPayload(item);
    const hiddenItemPayload = _item._$hiddenItemPayload;
    delete _item._$hiddenItemPayload;
    const clonedData = structuredClone(_item);
    _item._$hiddenItemPayload = hiddenItemPayload;
    return clonedData;
};
/**
 * deleteItemPayload deletes the hidden item payload
 */
export const deleteItemPayload = (item) => {
    delete item?._$hiddenItemPayload;
    return item;
};
/**
 * hasItemPayload returns true if item has hidden item payload
 */
export const hasItemPayload = (item) => {
    const _item = item;
    return !!_item?._$hiddenItemPayload;
};
export const throwError = (message) => {
    throw new Error(message);
};
export const ErrorItemPayload = (item) => {
    return new Error(`HiddenItemPayload does not exists on "${JSON.stringify(item)}".` +
        'Please make sure it is set by using setItemPayload.');
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLWRhdGFncmlkLnV0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9jb21wb25lbnRzL2RhdGFncmlkL3NyYy9jZGstZGF0YWdyaWQudXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFrQyxrQkFBa0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBRWpHOzs7O0dBSUc7QUFDSCxNQUFNLENBQUMsTUFBTSxrQkFBa0IsR0FDN0IsQ0FBTyxXQUFpQixFQUFFLHFCQUFpRCxFQUFFLEVBQUUsRUFBRSxDQUNqRixDQUFDLElBQVUsRUFBRSxjQUEwQyxFQUFFLEVBQUUsRUFBRTtJQUMzRCxPQUFPLGNBQWM7SUFDbkIsaUJBQWlCO0lBQ2pCLEVBQUUsR0FBRyxXQUFXLEVBQUUsR0FBRyxJQUFJLEVBQUUsRUFBRSxpQkFBaUI7SUFDOUMsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FDMUUsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVKOzs7Ozs7O0dBT0c7QUFDSCxrQkFBa0I7QUFDbEIsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFHLENBRTVCLElBQVUsRUFBRSxjQUEwQyxFQUFFLEVBQVEsRUFBRTtJQUNsRSxNQUFNLEtBQUssR0FBRyxJQUFzQyxDQUFDO0lBRXJELEtBQUssQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUN2QyxFQUFFLEdBQUcsa0JBQWtCLEVBQXVCLEVBQzlDLEVBQUUsR0FBRyxLQUFLLEVBQUUsbUJBQW1CLElBQUksRUFBRSxFQUF1QixFQUM1RCxFQUFFLEdBQUcsV0FBVyxFQUF1QixDQUN4QyxDQUFDO0lBRUYsT0FBTyxLQUFhLENBQUE7QUFDdEIsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSCxrQkFBa0I7QUFDbEIsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQUcsQ0FJakMsSUFBVSxFQUFFLEdBQW9CLEVBQW9CLEVBQUU7SUFDdEQsTUFBTSxLQUFLLEdBQUcsSUFBc0MsQ0FBQztJQUNyRCxJQUFJLENBQUMsS0FBSyxFQUFFLG1CQUFtQixFQUFFLENBQUM7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixNQUFNLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQXFCLENBQUM7QUFDNUQsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSCxrQkFBa0I7QUFDbEIsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFHLENBRTVCLElBQVUsRUFBK0IsRUFBRTtJQUMzQyxNQUFNLEtBQUssR0FBRyxJQUFzQyxDQUFDO0lBQ3JELElBQUksQ0FBQyxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsQ0FBQztRQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLE1BQU0sZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE9BQU8sS0FBSyxDQUFDLG1CQUFrRCxDQUFDO0FBQ2xFLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxDQUFPLElBQVUsRUFBVSxFQUFFO0lBQ3RELE1BQU0sS0FBSyxHQUFHLElBQXNDLENBQUM7SUFDckQsSUFBSSxDQUFDLEtBQUssRUFBRSxtQkFBbUI7UUFBRSxNQUFNLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBRTlELE1BQU0saUJBQWlCLEdBQUcsS0FBSyxDQUFDLG1CQUFtQixDQUFDO0lBQ3BELE9BQVEsS0FBK0IsQ0FBQyxtQkFBbUIsQ0FBQztJQUM1RCxNQUFNLFVBQVUsR0FBRyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUMsS0FBSyxDQUFDLG1CQUFtQixHQUFHLGlCQUFpQixDQUFDO0lBQzlDLE9BQU8sVUFBVSxDQUFDO0FBQ3BCLENBQUMsQ0FBQztBQUVGOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsQ0FBTyxJQUFzQyxFQUFRLEVBQUU7SUFDdEYsT0FBTyxJQUFJLEVBQUUsbUJBQW1CLENBQUM7SUFDakMsT0FBTyxJQUFZLENBQUM7QUFDdEIsQ0FBQyxDQUFDO0FBRUY7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBTyxJQUFVLEVBQUUsRUFBRTtJQUNqRCxNQUFNLEtBQUssR0FBRyxJQUFzQyxDQUFDO0lBQ3JELE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxtQkFBbUIsQ0FBQztBQUN0QyxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxPQUFlLEVBQUUsRUFBRTtJQUM1QyxNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzNCLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLENBQUMsSUFBYSxFQUFFLEVBQUU7SUFDaEQsT0FBTyxJQUFJLEtBQUssQ0FDZCx5Q0FBeUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSTtRQUMvRCxxREFBcUQsQ0FDeEQsQ0FBQztBQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhpZGRlbkl0ZW1QYXlsb2FkLCBJdGVtUGF5bG9hZCwgaXRlbVBheWxvYWREZWZhdWx0IH0gZnJvbSAnLi9jZGstZGF0YWdyaWQtZGF0YS5tYW5hZ2VyJztcblxuLyoqXG4gKiBleHBlcmltZW50YWxcbiAqIEBwYXJhbSBpdGVtRGVmYXVsdFxuICogQHBhcmFtIGl0ZW1QYXlsb2FkRGVmYXVsdFxuICovXG5leHBvcnQgY29uc3QgaXRlbVBheWxvYWRGYWN0b3J5ID1cbiAgPEl0ZW0+KGl0ZW1EZWZhdWx0OiBJdGVtLCBpdGVtUGF5bG9hZERlZmF1bHQ6IFBhcnRpYWw8SXRlbVBheWxvYWQ8SXRlbT4+ID0ge30pID0+XG4gIChpdGVtOiBJdGVtLCBpdGVtUGF5bG9hZDogUGFydGlhbDxJdGVtUGF5bG9hZDxJdGVtPj4gPSB7fSkgPT4ge1xuICAgIHJldHVybiBzZXRJdGVtUGF5bG9hZDxJdGVtPihcbiAgICAgIC8vIGl0ZW0gLy8gd29ya3MhXG4gICAgICB7IC4uLml0ZW1EZWZhdWx0LCAuLi5pdGVtIH0sIC8vIGRvZXMgbm90IHdvcmshXG4gICAgICBPYmplY3Qua2V5cyhpdGVtUGF5bG9hZERlZmF1bHQpLmxlbmd0aCA/IGl0ZW1QYXlsb2FkRGVmYXVsdCA6IGl0ZW1QYXlsb2FkLFxuICAgICk7XG4gIH07XG5cbi8qKlxuICogc2V0SXRlbVBheWxvYWQgc2V0cyBhbiBpdGVtUGF5bG9hZCBvbiBpdGVtIGluIGhpZGRlbi10eXBlLW1vZGUuXG4gKiBUaGlzIG1lYW5zIHRoZXJlIGlzIG5vIGRpcmVjdCBhY2Nlc3MgdG8gaXRlbVBheWxvYWQgb24gcmV0dXJuZWQgaXRlbSB3aXRoIFR5cGVTY3JpcHQuXG4gKiBUaGUgYWR2YW50YWdlIG9mIHRoaXMgYXBwcm9hY2ggaXMgdGhhdCB5b3UgY2FuIHB1dCBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzXG4gKiBhdCB0eXBlIGxldmVsIGluIGEgaGlkZGVuLXR5cGUtbW9kZSBzbyB0aGF0IGl0IGFsbG93cyBjYXJyeSBwYXlsb2FkIHdpdGggYW4gaXRlbS5cbiAqXG4gKiBUbyBnZXQgdGhlIGl0ZW1QYXlsb2FkIHlvdSBzaG91bGQgdXNlIGdldEl0ZW1QYXlsb2FkVmFsdWUgb3IgZ2V0SXRlbVBheWxvYWQuXG4gKi9cbi8vIHByZXR0aWVyLWlnbm9yZVxuZXhwb3J0IGNvbnN0IHNldEl0ZW1QYXlsb2FkID0gPFxuICBJdGVtLFxuPihpdGVtOiBJdGVtLCBpdGVtUGF5bG9hZDogUGFydGlhbDxJdGVtUGF5bG9hZDxJdGVtPj4gPSB7fSk6IEl0ZW0gPT4ge1xuICBjb25zdCBfaXRlbSA9IGl0ZW0gYXMgSXRlbSAmIEhpZGRlbkl0ZW1QYXlsb2FkPEl0ZW0+O1xuXG4gIF9pdGVtLl8kaGlkZGVuSXRlbVBheWxvYWQgPSBPYmplY3QuYXNzaWduKFxuICAgIHsgLi4uaXRlbVBheWxvYWREZWZhdWx0IH0gYXMgSXRlbVBheWxvYWQ8SXRlbT4sXG4gICAgeyAuLi5faXRlbT8uXyRoaWRkZW5JdGVtUGF5bG9hZCA/PyB7fSB9IGFzIEl0ZW1QYXlsb2FkPEl0ZW0+LFxuICAgIHsgLi4uaXRlbVBheWxvYWQgfSBhcyBJdGVtUGF5bG9hZDxJdGVtPixcbiAgKTtcblxuICByZXR1cm4gX2l0ZW0gYXMgSXRlbVxufTtcblxuLyoqXG4gKiBnZXRJdGVtUGF5bG9hZFZhbHVlIHJldHVybnMgYSBzcGVjaWZpYyBpdGVtUGF5bG9hZFZhbHVlIG9mIGFuIGl0ZW0gYnkgZ2l2ZW4ga2V5LlxuICovXG4vLyBwcmV0dGllci1pZ25vcmVcbmV4cG9ydCBjb25zdCBnZXRJdGVtUGF5bG9hZFZhbHVlID0gPFxuICBJdGVtLFxuICBJdGVtUGF5bG9hZEtleXMgZXh0ZW5kcyBrZXlvZiBJdGVtUGF5bG9hZDxJdGVtPixcbiAgSXRlbVBheWxvYWRWYWx1ZSBleHRlbmRzIEl0ZW1QYXlsb2FkPEl0ZW0+W0l0ZW1QYXlsb2FkS2V5c10sXG4+KGl0ZW06IEl0ZW0sIGtleTogSXRlbVBheWxvYWRLZXlzKTogSXRlbVBheWxvYWRWYWx1ZSA9PiB7XG4gIGNvbnN0IF9pdGVtID0gaXRlbSBhcyBJdGVtICYgSGlkZGVuSXRlbVBheWxvYWQ8SXRlbT47XG4gIGlmICghX2l0ZW0/Ll8kaGlkZGVuSXRlbVBheWxvYWQpIHtcbiAgICBjb25zb2xlLmxvZyhfaXRlbSk7XG4gICAgdGhyb3cgRXJyb3JJdGVtUGF5bG9hZChpdGVtKTtcbiAgfVxuXG4gIHJldHVybiBfaXRlbS5fJGhpZGRlbkl0ZW1QYXlsb2FkW2tleV0gYXMgSXRlbVBheWxvYWRWYWx1ZTtcbn07XG5cbi8qKlxuICogZ2V0SXRlbVBheWxvYWQgcmV0dXJucyBpdGVtUGF5bG9hZCB3aGljaCBpcyBpbiBoaWRkZW4tdHlwZS1tb2RlXG4gKi9cbi8vIHByZXR0aWVyLWlnbm9yZVxuZXhwb3J0IGNvbnN0IGdldEl0ZW1QYXlsb2FkID0gPFxuICBJdGVtLFxuPihpdGVtOiBJdGVtKTogUmVhZG9ubHk8SXRlbVBheWxvYWQ8SXRlbT4+ID0+IHtcbiAgY29uc3QgX2l0ZW0gPSBpdGVtIGFzIEl0ZW0gJiBIaWRkZW5JdGVtUGF5bG9hZDxJdGVtPjtcbiAgaWYgKCFfaXRlbT8uXyRoaWRkZW5JdGVtUGF5bG9hZCkge1xuICAgIGNvbnNvbGUubG9nKF9pdGVtKTtcbiAgICB0aHJvdyBFcnJvckl0ZW1QYXlsb2FkKGl0ZW0pO1xuICB9XG5cbiAgcmV0dXJuIF9pdGVtLl8kaGlkZGVuSXRlbVBheWxvYWQgYXMgUmVhZG9ubHk8SXRlbVBheWxvYWQ8SXRlbT4+O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEl0ZW1EYXRhID0gPEl0ZW0+KGl0ZW06IEl0ZW0pOiBvYmplY3QgPT4ge1xuICBjb25zdCBfaXRlbSA9IGl0ZW0gYXMgSXRlbSAmIEhpZGRlbkl0ZW1QYXlsb2FkPEl0ZW0+O1xuICBpZiAoIV9pdGVtPy5fJGhpZGRlbkl0ZW1QYXlsb2FkKSB0aHJvdyBFcnJvckl0ZW1QYXlsb2FkKGl0ZW0pO1xuXG4gIGNvbnN0IGhpZGRlbkl0ZW1QYXlsb2FkID0gX2l0ZW0uXyRoaWRkZW5JdGVtUGF5bG9hZDtcbiAgZGVsZXRlIChfaXRlbSBhcyBQYXJ0aWFsPHR5cGVvZiBfaXRlbT4pLl8kaGlkZGVuSXRlbVBheWxvYWQ7XG4gIGNvbnN0IGNsb25lZERhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoX2l0ZW0pO1xuICBfaXRlbS5fJGhpZGRlbkl0ZW1QYXlsb2FkID0gaGlkZGVuSXRlbVBheWxvYWQ7XG4gIHJldHVybiBjbG9uZWREYXRhO1xufTtcblxuLyoqXG4gKiBkZWxldGVJdGVtUGF5bG9hZCBkZWxldGVzIHRoZSBoaWRkZW4gaXRlbSBwYXlsb2FkXG4gKi9cbmV4cG9ydCBjb25zdCBkZWxldGVJdGVtUGF5bG9hZCA9IDxJdGVtPihpdGVtOiBQYXJ0aWFsPEhpZGRlbkl0ZW1QYXlsb2FkPEl0ZW0+Pik6IEl0ZW0gPT4ge1xuICBkZWxldGUgaXRlbT8uXyRoaWRkZW5JdGVtUGF5bG9hZDtcbiAgcmV0dXJuIGl0ZW0gYXMgSXRlbTtcbn07XG5cbi8qKlxuICogaGFzSXRlbVBheWxvYWQgcmV0dXJucyB0cnVlIGlmIGl0ZW0gaGFzIGhpZGRlbiBpdGVtIHBheWxvYWRcbiAqL1xuZXhwb3J0IGNvbnN0IGhhc0l0ZW1QYXlsb2FkID0gPEl0ZW0+KGl0ZW06IEl0ZW0pID0+IHtcbiAgY29uc3QgX2l0ZW0gPSBpdGVtIGFzIEl0ZW0gJiBIaWRkZW5JdGVtUGF5bG9hZDxJdGVtPjtcbiAgcmV0dXJuICEhX2l0ZW0/Ll8kaGlkZGVuSXRlbVBheWxvYWQ7XG59O1xuXG5leHBvcnQgY29uc3QgdGhyb3dFcnJvciA9IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xufTtcblxuZXhwb3J0IGNvbnN0IEVycm9ySXRlbVBheWxvYWQgPSAoaXRlbTogdW5rbm93bikgPT4ge1xuICByZXR1cm4gbmV3IEVycm9yKFxuICAgIGBIaWRkZW5JdGVtUGF5bG9hZCBkb2VzIG5vdCBleGlzdHMgb24gXCIke0pTT04uc3RyaW5naWZ5KGl0ZW0pfVwiLmAgK1xuICAgICAgJ1BsZWFzZSBtYWtlIHN1cmUgaXQgaXMgc2V0IGJ5IHVzaW5nIHNldEl0ZW1QYXlsb2FkLicsXG4gICk7XG59O1xuIl19